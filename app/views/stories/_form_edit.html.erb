<div id="page-content-wrapper">
  <div class="container-fluid">
    <div class="row">
      <div class="col-lg-12">
        <a href="#menu-toggle" class="btn btn-default" id="menu-toggle"><%= t("all_stories") %></a>

        <h2><%= t("story.edit") %></h2>
        <br>
        <% if @story.present? %>
            <%= form_for @story, url: {action: "update"}, html: {class: "form-horizontal story_form"} do |f| %>

                <% hidden_field_tag "topic_id", @topic.try(:id) || 0 %>


                <div class="form-group">
                  <label for="story_title" class="col-sm-2 control-label"><%= t("topics") %></label>

                  <div class="col-sm-10">

                    <select class="form-control" id="topics" name="topic">
                      <% @topics.try(:each) do |topic| %>
                          <option value="<%= topic.try(:id) %> <%="selected" if @story.try(:topics).try(:last).try(:id) == topic.try(:id)%>"><%= topic.try(:title) %></option>
                      <% end %>
                    </select>

                  </div>
                </div>

                <div class="form-group">
                  <label for="story_title" class="col-sm-2 control-label"><%= t("story.title") %></label>

                  <div class="col-sm-10">
                    <%= f.text_field :title, class: "form-control", id: "story_title", placeholer: t('story.title') %>
                  </div>
                </div>

                <div class="form-group">
                  <label for="story_text" class="col-sm-2 control-label"><%= t("story.text") %></label>

                  <div class="col-sm-10">
                    <%= f.text_area :text, class: "form-control", rows: 5, id: "story_text", placeholer: t('story.text') %>
                  </div>
                </div>

                <%= f.fields_for :sources do |source_form| %>

                    <div class="form-group">
                      <label for="story_source" class="col-sm-2 control-label"><%= t("story.source") %></label>

                      <div class="col-sm-10">
                        <!--<div class="row">-->
                        <%= source_form.label :title, class: "col-sm-1" %>
                        <%= source_form.text_field :title, class: "col-sm-3" %>
                        <%= source_form.label :url, class: "col-sm-1" %>
                        <%= source_form.text_field :url, class: "col-sm-7" %>
                        <!--</div>-->
                        <% source_form.text_field :sources, class: "form-control", rows: 5, id: "story_source", placeholer: t('story.source') %>
                      </div>
                    </div>
                <% end %>



                <div class="form-group">
                  <div class="col-sm-offset-2 col-sm-10">
                    <!--<button type="submit" class="btn btn-default">t("story.new")</button>-->
                    <%= f.submit t("story.edit"), class: "btn btn-primary btn-block" %>
                  </div>
                </div>

            <% end %>
        <% else %>
            <h3><%= t("no_story") %></h3>
        <% end %>

      </div>
    </div>
  </div>
</div>